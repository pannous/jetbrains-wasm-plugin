# WebAssembly GC Feature Test Results

## Test Setup
- Test file: `src/test/resources/parser/file/Gc.wat`
- Test class: `WebAssemblyTestFile.testGc()` in `src/test/kotlin/com/intellij/webassembly/lang/parser/WebAssemblyTestFile.kt`
- Test status: ✅ **PASSING**

## Test Coverage

The test verifies parsing of WebAssembly GC (Garbage Collection) proposal features:

### ✅ Successfully Parsed Features

1. **Struct Types** (lines 91-158 in parse tree)
   - `(type $my-struct (struct ...))`
   - Fields with mutable/immutable types
   - Nested field definitions with `(field i32)` and `(field (mut i64))`

2. **Reference Types** (lines 72-106 in parse tree)
   - `(ref null $my-array)` - nullable references
   - `(ref null $my-struct)` - nullable struct references
   - Local variables with GC reference types

3. **GC Instructions**
   - `array.new` (line 114-118) - array creation
   - `struct.new` (line 154-158) - struct creation
   - Proper parsing of instruction operands

4. **Type References**
   - Type identifiers like `$my-array`, `$my-struct`
   - Reference type syntax in local declarations

### ❌ Known Parse Errors

1. **Array Type Syntax** (line 15-22 in parse tree)
   ```wat
   (type $my-array (array i32))
   ```
   - Error: `WebAssemblyTokenType.LPAR expected, got 'i32'`
   - Location: `src/test/resources/parser/file/Gc.txt:20`
   - The parser expects `(array (...))` but the spec allows `(array i32)` directly

2. **Module closing paren** (line 190-191)
   - Minor error with final closing parenthesis
   - May be related to array type parse error propagation

## Test Execution

The test can be run with:
```bash
./gradlew test --tests "com.intellij.webassembly.lang.parser.WebAssemblyTestFile.testGc"
```

## Parse Tree Location

Full parse tree output: `src/test/resources/parser/file/Gc.txt`

This shows the complete AST (Abstract Syntax Tree) generated by the parser, useful for:
- Verifying correct token recognition
- Debugging parse errors
- Understanding parser structure for IDE features
